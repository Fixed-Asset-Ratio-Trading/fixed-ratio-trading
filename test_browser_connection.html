<!DOCTYPE html>
<html>
<head>
    <title>CORS Test</title>
</head>
<body>
    <h1>Testing CORS Connection</h1>
    <button onclick="testConnection()">Test Connection</button>
    <pre id="result"></pre>
    
    <script>
    async function testConnection() {
        const result = document.getElementById('result');
        result.textContent = 'Testing...';
        
        try {
                    console.log('Testing POST request to http://192.168.9.81:8899');
        
        const response = await fetch('http://192.168.9.81:8899', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    jsonrpc: '2.0',
                    id: 1,
                    method: 'getHealth'
                })
            });
            
            console.log('Response status:', response.status);
            console.log('Response headers:', [...response.headers.entries()]);
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            const data = await response.json();
            result.textContent = 'SUCCESS:\n' + JSON.stringify(data, null, 2);
            console.log('Success:', data);
            
        } catch (error) {
            result.textContent = 'ERROR:\n' + error.message;
            console.error('Error:', error);
        }
    }
    </script>
</body>
</html>
